# Unity Scene & UI Manager

Этот проект демонстрирует, как организовать управление сценами и пользовательским интерфейсом в Unity с помощью нескольких скриптов. Ниже приведено описание основных скриптов, входящих в проект.

---

## Скрипты

### MainSceneUIManager

**MainSceneUIManager** отвечает за управление пользовательским интерфейсом на главной сцене и включает в себя следующие функции:

- **Переключение между меню:**  
  Используется перечисление `MenuState` с двумя состояниями — `MainMenu` (главное меню) и `Settings` (настройки). Метод `ChangeStateMenu()` переключает отображение между соответствующими UI-элементами (`_mainMenuUI` и `_settingsMenuUI`).

- **Переход к сцене чата:**  
  При нажатии на кнопку `_openChatButton` вызывается метод `ChatScene()`, который с помощью объекта `_loader` асинхронно загружает сцену чата.

- **Настройка и отображение цветов:**  
  Скрипт позволяет пользователю настраивать цвета для двух элементов — для "user" и для "bot".  
  - Изменения значений слайдеров (`_userRed`, `_userGreen`, `_userBlue` и `_botRed`, `_botGreen`, `_botBlue`) обновляют соответствующие цвета в реальном времени через метод `ChangeColorRealTimeUI()`.
  - Текст кнопки сохранения меняется в зависимости от того, отличаются ли текущие значения от сохранённых.

- **Сохранение и загрузка настроек цвета:**  
  - Метод `SaveUIColor()` сохраняет текущие значения цветов в `PlayerPrefs`, что позволяет сохранять настройки между сессиями.
  - При запуске (`Awake()`) происходит проверка: если сохранённых значений нет (или они равны нулю), вызывается метод `DefaultUIColor()`, который устанавливает стандартные значения; иначе — загружаются сохранённые настройки с помощью `SetColorsFromSave()`.

---

### SceneLoader

Скрипт **SceneLoader** предоставляет удобный механизм для загрузки сцен как синхронно, так и асинхронно. Основные возможности:

- **Синхронная загрузка:**  
  Метод `LoadScene(SceneData.SceneType sceneType)` получает имя сцены через объект `SceneData` и использует `SceneManager.LoadScene(sceneName)` для мгновенной загрузки. Если сцена не найдена, выводится сообщение об ошибке.

- **Асинхронная загрузка:**  
  Метод `LoadSceneAsync(SceneData.SceneType sceneType)` также получает имя сцены и запускает Coroutine `LoadSceneAsyncCoroutine(sceneName)`.  
  - В Coroutine происходит асинхронная загрузка через `SceneManager.LoadSceneAsync(sceneName)`.
  - Прогресс загрузки нормализуется (учитывая, что `operation.progress` идёт от 0 до 0.9) и выводится в консоль.  
  - Здесь же можно интегрировать обновление UI (например, индикатора загрузки).

---

### SceneData

**SceneData** — это ScriptableObject, предназначенный для управления информацией о сценах проекта:

- **Перечисление SceneType:**  
  Определяет логические имена для сцен, например, `MainMenu` и `Chat`, что упрощает ссылку на сцены по смысловым именам, а не строковым значениям.

- **Структура SceneMapping:**  
  Содержит два поля:
  - `sceneType` — тип сцены из перечисления.
  - `scene` — объект типа `SceneAsset`, соответствующий сцене, как она указана в Build Settings.

- **Массив scenes:**  
  Позволяет хранить список всех сопоставлений между типами сцен и их ассетами.

- **Метод GetScene:**  
  Принимает тип сцены и перебирает массив `scenes` для поиска соответствующего `SceneAsset`. Если нужное сопоставление не найдено, возвращается первая сцена из массива.

- **Атрибут CreateAssetMenu:**  
  Позволяет создать новый объект `SceneData` через контекстное меню Unity (путь: *ScriptableObjects/SceneData*).

---

## Как использовать

1. **Создание объекта SceneData:**  
   Через меню Unity (Create → ScriptableObjects → SceneData) создайте объект, который будет хранить информацию о сценах. Добавьте в него нужные сцены, сопоставив их с логическими именами.

2. **Настройка инспектора:**  
   Привяжите созданный объект `SceneData` к соответствующим полям в инспекторе для скриптов `SceneLoader` и `MainSceneUIManager`.

3. **Настройка UI:**  
   Настройте кнопки, слайдеры и другие элементы интерфейса в Unity Editor, связав их с методами из `MainSceneUIManager` и `SceneLoader`.

4. **Запуск проекта:**  
   При запуске проекта вы сможете переключаться между основным меню и меню настроек, настраивать цвета элементов, сохранять эти настройки и переходить к другим сценам (например, к сцене чата).

---

## Заключение

Эти скрипты обеспечивают:
- Централизованное управление сценами с возможностью синхронной и асинхронной загрузки.
- Динамическую настройку пользовательского интерфейса, включая смену цветовых схем.
- Удобное сохранение и восстановление настроек между сессиями.

Используя данный подход, вы сможете создать гибкую и масштабируемую архитектуру для управления сценами и UI в вашем Unity-проекте.
